/* artDialog 5 | (c) 2009-2012 TangBin | http://code.google.com/p/artdialog/ */
(function(e,g,b){if(document.compatMode==="BackCompat"){throw new Error("artDialog: Document types require more than xhtml1.0")}var c,h=0,j="artDialog"+ +new Date,f=g.VBArray&&!g.XMLHttpRequest,i="createTouch" in document&&!("onmousemove" in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),d=!f&&!i;var a=function(k,m,p){k=k||{};if(typeof k==="string"||k.nodeType===1){k={content:k,fixed:!i}}var n,q=a.defaults;var o=k.follow=this.nodeType===1&&this||k.follow;for(var l in q){if(k[l]===b){k[l]=q[l]}}k.id=o&&o[j+"follow"]||k.id||j+h;n=a.list[k.id];if(n){if(o){n.follow(o)}n.zIndex().focus();return n}if(!d){k.fixed=false}if(!k.button||!k.button.push){k.button=[]}if(m!==b){k.ok=m}if(k.ok){k.button.push({id:"ok",value:k.okValue,callback:k.ok,focus:true})}if(p!==b){k.cancel=p}if(k.cancel){k.button.push({id:"cancel",value:k.cancelValue,callback:k.cancel})}a.defaults.zIndex=k.zIndex;h++;return a.list[k.id]=c?c.constructor(k):new a.fn.constructor(k)};a.version="5.0";a.fn=a.prototype={constructor:function(k){var l;this.closed=false;this.config=k;this.dom=l=this.dom||this._getDom();k.skin&&l.wrap.addClass(k.skin);l.wrap.css("position",k.fixed?"fixed":"absolute");l.close[k.cancel===false?"hide":"show"]();l.content.css("padding",k.padding);this.button.apply(this,k.button);this.title(k.title).content(k.content).size(k.width,k.height).time(k.time);k.follow?this.follow(k.follow):this.position();this.zIndex();k.lock&&this.lock();this._addEvent();this[k.visible?"visible":"hidden"]().focus();c=null;k.initialize&&k.initialize.call(this);return this},content:function(v){var m,o,t,s,q=this,n=this.dom,k=n.content,r=k[0];if(this._elemBack){this._elemBack();delete this._elemBack}if(typeof v==="string"){k.html(v)}else{if(v&&v.nodeType===1){s=v.style.display;m=v.previousSibling;o=v.nextSibling;t=v.parentNode;this._elemBack=function(){if(m&&m.parentNode){m.parentNode.insertBefore(v,m.nextSibling)}else{if(o&&o.parentNode){o.parentNode.insertBefore(v,o)}else{if(t){t.appendChild(v)}}}v.style.display=s;q._elemBack=null};k.html("");r.appendChild(v);e(v).show()}}if(n.wrapIframe.length){var l=n.wrap[0],u=l.offsetWidth,p=l.offsetHeight;n.wrapIframe.css({"width":u,"height":p,"marginBottom":-p})}return this.position()},title:function(n){var o=this.dom,k=o.outer,m=o.title,l="d-state-noTitle";if(n===false){m.hide().html("");k.addClass(l)}else{m.show().html(n);k.removeClass(l)}return this},position:function(){var t=this.dom,m=t.wrap[0],n=t.window,r=t.document,s=this.config.fixed,v=s?0:r.scrollLeft(),o=s?0:r.scrollTop(),u=n.width(),l=n.height(),p=m.offsetWidth,x=m.offsetHeight,q=(u-p)/2+v,w=w=(x<4*l/7?l*0.382-x/2:(l-x)/2)+o,k=m.style;k.left=Math.max(q,v)+"px";k.top=Math.max(w,o)+"px";return this},size:function(m,k){var l=this.dom.main[0].style;if(typeof m==="number"){m=m+"px"}if(typeof k==="number"){k=k+"px"}l.width=m;l.height=k;return this},follow:function(G){var k=e(G),I=this.config;if(!G||!G.offsetWidth&&!G.offsetHeight){return this.position(this._left,this._top)}var n=I.fixed,s=j+"follow",F=this.dom,w=F.window,H=F.document,v=w.width(),m=w.height(),p=H.scrollLeft(),r=H.scrollTop(),q=k.offset(),B=G.offsetWidth,A=G.offsetHeight,o=n?q.left-p:q.left,y=n?q.top-r:q.top,t=this.dom.wrap[0],E=t.style,l=t.offsetWidth,D=t.offsetHeight,u=o-(l-B)/2,z=y+A,C=n?0:p,x=n?0:r;u=u<C?o:(u+l>v)&&(o-l>C)?o-l+B:u;z=(z+D>m+x)&&(y-D>x)?y-D:z;E.left=u+"px";E.top=z+"px";this._follow&&this._follow.removeAttribute(s);this._follow=G;G[s]=I.id;return this},button:function(){var p=this.dom,l=p.buttons,o=l[0],v="d-state-highlight",t=this._listeners=this._listeners||{},n=[].slice.call(arguments);var q=0,m,u,k,s,r;for(;q<n.length;q++){m=n[q];u=m.value;k=m.id||u;s=!t[k];r=!s?t[k].elem:document.createElement("input");r.type="button";r.className="d-button";if(!t[k]){t[k]={}}if(u){r.value=u}if(m.width){r.style.width=m.width}if(m.callback){t[k].callback=m.callback}if(m.focus){this._focus&&this._focus.removeClass(v);this._focus=e(r).addClass(v);this.focus()}r[j+"callback"]=k;r.disabled=!!m.disabled;if(s){t[k].elem=r;o.appendChild(r)}}l[0].style.display=n.length?"":"none";return this},visible:function(){this.dom.wrap.css("visibility","visible");this.dom.outer.addClass("d-state-visible");if(this._isLock){this._lockMask.show()}return this},hidden:function(){this.dom.wrap.css("visibility","hidden");this.dom.outer.removeClass("d-state-visible");if(this._isLock){this._lockMask.hide()}return this},close:function(){if(this.closed){return this}var p=this.dom,l=p.wrap,o=a.list,m=this.config.beforeunload,k=this.config.follow;if(m&&m.call(this)===false){return this}if(a.focus===this){a.focus=null}if(k){k.removeAttribute(j+"follow")}if(this._elemBack){this._elemBack()}this.time();this.unlock();this._removeEvent();delete o[this.config.id];if(c){l.remove()}else{c=this;p.title.html("");p.content.html("");p.buttons.html("");l[0].className=l[0].style.cssText="";p.outer[0].className="d-outer";l.css({left:0,top:0,position:d?"fixed":"absolute"});for(var n in this){if(this.hasOwnProperty(n)&&n!=="dom"){delete this[n]
}}this.hidden()}this.closed=true;return this},time:function(l){var k=this,m=this._timer;m&&clearTimeout(m);if(l){this._timer=setTimeout(function(){k._click("cancel")},l)}return this},focus:function(){if(this.config.focus){try{var k=this._focus&&this._focus[0]||this.dom.close[0];k&&k.focus()}catch(l){}}return this},zIndex:function(){var m=this.dom,l=a.focus,k=a.defaults.zIndex++;m.wrap.css("zIndex",k);this._lockMask&&this._lockMask.css("zIndex",k-1);l&&l.dom.outer.removeClass("d-state-focus");a.focus=this;m.outer.addClass("d-state-focus");return this},lock:function(){if(this._isLock){return this}var n=this,m=this.config,o=this.dom,p=document.createElement("div"),k=e(p),l=a.defaults.zIndex-1;this.zIndex();o.outer.addClass("d-state-lock");k.css({zIndex:l,position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden"}).addClass("d-mask");if(f){k.append(e("<iframe>",{"class":"d-mask-iframe","src":"about:blank"}))}if(!d){k.css({position:"absolute",width:e(g).width()+"px",height:e(document).height()+"px"})}k.bind("click",function(){n._reset()}).bind("dblclick",function(){n._click("cancel")});document.body.appendChild(p);this._lockMask=k;this._isLock=true;return this},unlock:function(){if(!this._isLock){return this}this._lockMask.unbind();this._lockMask.hide();this._lockMask.remove();this.dom.outer.removeClass("d-state-lock");this._isLock=false;return this},_getDom:function(){var k=document.body;if(!k){throw new Error('artDialog: "documents.body" not ready')}var p=document.createElement("div");p.style.cssText="position:absolute;left:0;top:0";p.innerHTML=a._templates;k.insertBefore(p,k.firstChild);var m,o=0,q={},n=p.getElementsByTagName("*"),l=n.length;for(;o<l;o++){m=n[o].className.split("d-")[1];if(m){q[m]=e(n[o])}}q.window=e(g);q.document=e(document);q.wrap=e(p);q.wrapIframe=e(p).find(".d-outer-iframe");return q},_click:function(l){var k=this._listeners[l]&&this._listeners[l].callback;return typeof k!=="function"||k.call(this)!==false?this.close():this},_reset:function(){var k=this.config.follow;k?this.follow(k):this.position()},_addEvent:function(){var k=this,l=this.dom;l.wrap.bind("click",function(n){var o=n.target,m;if(o.disabled){return false}if(o===l.close[0]){k._click("cancel");return false}else{m=o[j+"callback"];m&&k._click(m)}}).bind("mousedown",function(){k.zIndex()})},_removeEvent:function(){this.dom.wrap.unbind()}};a.fn.constructor.prototype=a.fn;e.fn.dialog=e.fn.artDialog=function(){var k=arguments;this[this.live?"live":"bind"]("click",function(){a.apply(this,k);return false});return this};a.focus=null;a.get=function(k){return k===b?a.list:a.list[k]};a.list={};e(document).bind("keydown",function(m){var o=m.target,p=o.nodeName,k=/^input|textarea$/i,l=a.focus,n=m.keyCode;if(!l||!l.config.esc||k.test(p)&&o.type!=="button"){return}n===27&&l._click("cancel")});e(g).bind("resize",function(){var k=a.list;for(var l in k){k[l]._reset()}});a._templates='<div class="d-outer">'+((f)?'<iframe class="d-outer-iframe" src="about:blank"></iframe>':"")+'<table class="d-border">'+"<tbody>"+"<tr>"+'<td class="d-nw"></td>'+'<td class="d-n"></td>'+'<td class="d-ne"></td>'+"</tr>"+"<tr>"+'<td class="d-w"></td>'+'<td class="d-c">'+'<div class="d-inner">'+'<table class="d-dialog">'+"<tbody>"+"<tr>"+'<td class="d-header">'+'<div class="d-titleBar">'+'<div class="d-title"></div>'+'<a class="d-close" href="javascript:/*artDialog*/;">'+"\xd7"+"</a>"+"</div>"+"</td>"+"</tr>"+"<tr>"+'<td class="d-main">'+'<div class="d-content"></div>'+"</td>"+"</tr>"+"<tr>"+'<td class="d-footer">'+'<div class="d-buttons"></div>'+"</td>"+"</tr>"+"</tbody>"+"</table>"+"</div>"+"</td>"+'<td class="d-e"></td>'+"</tr>"+"<tr>"+'<td class="d-sw"></td>'+'<td class="d-s"></td>'+'<td class="d-se"></td>'+"</tr>"+"</tbody>"+"</table>"+"</div>";a.defaults={content:'<div class="d-loading"><span>loading..</span></div>',title:"message",button:null,ok:null,cancel:null,initialize:null,beforeunload:null,okValue:"ok",cancelValue:"cancel",width:"auto",height:"auto",padding:"0",skin:null,time:null,esc:true,focus:true,visible:true,follow:null,lock:false,fixed:false,zIndex:1987};this.artDialog=e.dialog=e.artDialog=a}(this.art||this.$,this));

/* defaults_cn @jiangfeng.zhu 2012.11.07 */
(function(defaults){defaults['okValue']='\u786e\u5b9a';defaults['cancelValue']='\u53d6\u6d88';defaults['title']='\u6d88\u606f'})($.dialog.defaults);

/* artDialog 5 plugins  @jiangfeng.zhu 2012.11.14 */
(function(f){f.confirm24=f.dialog.confirm24=function(p){var m=!p["type"]?0:p["type"]|0,o=!p["title"]?"\u63D0\u793A":p["title"];var l=["handy-s24-01","handy-s24-02","handy-s24-03","handy-s24-04"],k="icon-handy icon-s24 "+l[m];var n=['<div class="clearfix handy-confrim24">','<div class="center-wrap">','<div class="center-wrap-content">','<i class="'+k+'"></i>',"<h5>"+p["content"]+"</h5>","</div>","</div>","</div>"].join("\n");var q=!p["ok"]?function(){return}:p["ok"],r=!p["cancel"]?function(){return}:p["cancel"];return f.dialog({id:"Confirm",fixed:true,lock:true,title:o,content:n,ok:q,cancel:r})};f.confirm32=f.dialog.confirm32=function(p){var m=!p["type"]?0:p["type"]|0,o=!p["title"]?"\u63D0\u793A":p["title"];var l=["handy-s32-01","handy-s32-02","handy-s32-03","handy-s32-04"],k="icon-handy icon-s32 "+l[m];var n=['<div class="clearfix handy-confrim32">','<div class="center-wrap">','<div class="center-wrap-content">','<i class="'+k+'"></i>','<ul class="handy-confrim32-content">','<li class="confirm-title">'+p["content"]+"</li>",'<li class="confirm-tips">'+p["tips"]+"</li>","</ul>","</div>","</div>","</div>"].join("\n");var q=!p["ok"]?function(){return}:p["ok"],r=!p["cancel"]?function(){return}:p["cancel"];return f.dialog({id:"Confirm",fixed:true,lock:true,title:o,content:n,ok:q,cancel:r})};f.tips=f.dialog.tips=function(r){var o=!r["type"]?0:r["type"]|0,m=["handy-s24-01","handy-s24-02","handy-s24-03","handy-s24-04"],l="icon-handy icon-s24 "+m[o];var p=['<div class="handy-tips">','<div class="clearfix m15">','<i class="'+l+'"></i>',"<p>"+r["content"]+"</p>","</div>","</div>"].join("\n");var q=!r["time"]?2000:r["time"]|0,k=!r["width"]?"auto":r["width"],n=!r["beforeunload"]?function(){return}:r["beforeunload"];return artDialog({id:"Tips",title:false,content:p,cancel:false,fixed:true,lock:false,time:q,width:k,beforeunload:n})};var j=function(){var l=this,k=function(m){var n=l[m];l[m]=function(){return n.apply(l,arguments)}};k("start");k("over");k("end")};j.prototype={start:function(k){f(document).bind("mousemove",this.over).bind("mouseup",this.end);this._sClientX=k.clientX;this._sClientY=k.clientY;this.onstart(k.clientX,k.clientY);return false},over:function(k){this._mClientX=k.clientX;this._mClientY=k.clientY;this.onover(k.clientX-this._sClientX,k.clientY-this._sClientY);return false},end:function(k){f(document).unbind("mousemove",this.over).unbind("mouseup",this.end);this.onend(k.clientX,k.clientY);return false}};var b=f(window),d=f(document),g=document.documentElement,e=!("minWidth" in g.style),h=!e&&"onlosecapture" in g,c="setCapture" in g,a=function(){return false};var i=function(z){var o=new j,t=artDialog.focus,A=t.dom,x=A.wrap,v=A.title,s=A.main,q=x[0],F=v[0],m=s[0],k=q.style,y=m.style;var p=z.target===A.se[0]?true:false;var n=q.style.position==="fixed",E=n?0:d.scrollLeft(),C=n?0:d.scrollTop(),D=b.width()-q.offsetWidth+E,B=b.height()-q.offsetHeight+C;var u,w,r,l;o.onstart=function(G,H){if(p){u=m.offsetWidth;w=m.offsetHeight}else{r=q.offsetLeft;l=q.offsetTop}d.bind("dblclick",o.end).bind("dragstart",a);if(h){v.bind("losecapture",o.end)}else{b.bind("blur",o.end)}c&&F.setCapture();x.addClass("d-state-drag");t.focus()};o.onover=function(H,L){if(p){var I=H+u,G=L+w;k.width="auto";y.width=Math.max(0,I)+"px";k.width=q.offsetWidth+"px";y.height=Math.max(0,G)+"px"}else{var K=Math.max(E,Math.min(D,H+r)),J=Math.max(C,Math.min(B,L+l));k.left=K+"px";k.top=J+"px"}};o.onend=function(G,H){d.unbind("dblclick",o.end).unbind("dragstart",a);if(h){v.unbind("losecapture",o.end)}else{b.unbind("blur",o.end)}c&&F.releaseCapture();x.removeClass("d-state-drag")};o.start(z)};f(document).bind("mousedown",function(m){var l=artDialog.focus;if(!l){return}var n=m.target,k=l.config,o=l.dom;if(k.drag!==false&&n===o.title[0]||k.resize!==false&&n===o.se[0]){i(m);return false}})}(this.art||this.$));

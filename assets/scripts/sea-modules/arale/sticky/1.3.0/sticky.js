define("arale/sticky/1.3.0/sticky",["$"],function(a,b,c,d){function e(a){this.options=a||{},this.elem=i(this.options.element),this.callback=a.callback||function(){},this.position=a.position,this._stickyId=l++}function f(a,b,c){return i.isPlainObject(b)||(b={top:b}),b.top===d&&b.bottom===d&&(b.top=0),new e({element:a,position:b,callback:c}).render()}function g(){return!o}function h(){if(n)return!1;var a=j[0].body;if(j[0].createElement&&a&&a.appendChild&&a.removeChild){var b,c=j[0].createElement("div"),d=function(a){return window.getComputedStyle?window.getComputedStyle(c).getPropertyValue(a):c.currentStyle.getAttribute(a)};a.appendChild(c);for(var e=0;e<k.length&&(c.style.cssText="position:"+k[e]+"sticky;visibility:hidden;",!(b=-1!==d("position").indexOf("sticky")));e++);return c.parentNode.removeChild(c),b}}var i=a("$"),j=i(document),k=["-webkit-","-ms-","-o-","-moz-",""],l=0,m=(window.navigator.userAgent||"").toLowerCase(),n=-1!==m.indexOf("msie"),o=-1!==m.indexOf("msie 6"),p=h(),q=g();e.prototype._prepare=function(){var a=this.elem.offset();this._originTop=a.top,this._originLeft=a.left,this.position.top===Number.MAX_VALUE&&(this._callFix=!0,this.position.top=this._originTop),this._originStyles={position:null,top:null,bottom:null,left:null};for(var b in this._originStyles)this._originStyles.hasOwnProperty(b)&&(this._originStyles[b]=this.elem.css(b))},e.prototype.render=function(){var a=this;if(!this.elem.length||this.elem.data("bind-sticked"))return this;this._prepare(),this.adjust=function(){a._restore();var c=a.elem.offset();a._originTop=c.top,a._originLeft=c.left,b.call(a)};var b;if(f.isPositionStickySupported&&!this._callFix){b=this._supportSticky;for(var c="",e=0;e<k.length;e++)c+="position:"+k[e]+"sticky;";this.position.top!==d&&(c+="top: "+this.position.top+"px;"),this.position.bottom!==d&&(c+="bottom: "+this.position.bottom+"px;"),this.elem[0].style.cssText+=c,this.adjust=function(){b.call(a)}}else f.isPositionFixedSupported?b=this._supportFixed:(b=this._supportAbsolute,i("<style type='text/css'> * html{ background:url(null) no-repeat fixed; } </style>").appendTo("head"));return b.call(this),i(window).on("scroll.sticky"+this._stickyId,function(){a.elem.is(":visible")&&b.call(a)}),this.elem.data("bind-sticked",!0),this},e.prototype._getTopBottom=function(a,b){var c,e;return this.position.top!==d&&(c=b-a<=this.position.top),this.position.bottom!==d&&(e=a+i(window).height()-b-this.elem.outerHeight()<=this.position.bottom),{top:c,bottom:e}},e.prototype._supportFixed=function(){var a=this.elem.data("sticked"),b=this._getTopBottom(j.scrollTop(),this._originTop);!a&&(b.top!==d&&b.top||b.bottom!==d&&b.bottom)?(this._addPlaceholder(),this.elem.css(i.extend({position:"fixed",left:this._originLeft},b.top?{top:this.position.top}:{bottom:this.position.bottom})),this.elem.data("sticked",!0),this.callback.call(this,!0)):!a||b.top||b.bottom||this._restore()},e.prototype._supportAbsolute=function(){var a=j.scrollTop(),b=this.elem.data("sticked"),c=this._getTopBottom(a,this.elem.offset().top);c.top||c.bottom||this._callFix?(b||(this._addPlaceholder(),this.elem.data("sticked",!0),this.callback.call(this,!0)),this.elem.css({position:"absolute",top:this._callFix?this._originTop+a:c.top?this.position.top+a:a+i(window).height()-this.position.bottom-this.elem.outerHeight()})):!b||c.top||c.bottom||this._restore()},e.prototype._supportSticky=function(){var a=this.elem.data("sticked"),b=this._getTopBottom(j.scrollTop(),this.elem.offset().top);!a&&(b.top!==d&&b.top||b.bottom!==d&&b.bottom)?(this.elem.data("sticked",!0),this.callback.call(this,!0)):!a||b.top||b.bottom||(this.elem.data("sticked",!1),this.callback.call(this,!1))},e.prototype._restore=function(){this._removePlaceholder(),this.elem.css(this._originStyles),this.elem.data("sticked",!1),this.callback.call(this,!1)},e.prototype._addPlaceholder=function(){var a=!1,b=this.elem.css("position");("static"===b||"relative"===b)&&(a=!0),"block"!==this.elem.css("display")&&(a=!1),a&&(this._placeholder=i('<div style="visibility:hidden;margin:0;padding:0;"></div>'),this._placeholder.width(this.elem.outerWidth(!0)).height(this.elem.outerHeight(!0)).css("float",this.elem.css("float")).insertAfter(this.elem))},e.prototype._removePlaceholder=function(){this._placeholder&&this._placeholder.remove()},e.prototype.destory=function(){this._restore(),this.elem.data("bind-sticked",!1),i(window).off("scroll.sticky"+this._stickyId)},c.exports=f,f.stick=f,f.fix=function(a){return new e({element:a,position:{top:Number.MAX_VALUE}}).render()},f.isPositionStickySupported=p,f.isPositionFixedSupported=q});

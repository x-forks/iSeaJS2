define("jquery/ztree/3.5.14/exedit",["jquery/jquery/1.8.3/jquery"],function(e){var t=e("jquery/jquery/1.8.3/jquery");(function(e){var t={event:{DRAG:"ztree_drag",DROP:"ztree_drop",REMOVE:"ztree_remove",RENAME:"ztree_rename"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},n={edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDrop:null,onRename:null}},o=function(e){var t=C.getRoot(e),n=C.getRoots();t.curEditNode=null,t.curEditInput=null,t.curHoverNode=null,t.dragFlag=0,t.dragNodeShowBefore=[],t.dragMaskList=[],n.showHoverDom=!0},a=function(){},r=function(e){var t=e.treeObj,n=k.event;t.bind(n.RENAME,function(t,n,o,a){N.apply(e.callback.onRename,[t,n,o,a])}),t.bind(n.REMOVE,function(t,n,o){N.apply(e.callback.onRemove,[t,n,o])}),t.bind(n.DRAG,function(t,n,o,a){N.apply(e.callback.onDrag,[n,o,a])}),t.bind(n.DROP,function(t,n,o,a,r,d,i){N.apply(e.callback.onDrop,[n,o,a,r,d,i])})},d=function(e){var t=e.treeObj,n=k.event;t.unbind(n.RENAME),t.unbind(n.REMOVE),t.unbind(n.DRAG),t.unbind(n.DROP)},i=function(e){var t=e.target,n=C.getSetting(e.data.treeId),o=e.relatedTarget,a="",r=null,d="",i="",l=null,s=null,c=null;if(N.eqs(e.type,"mouseover")?(c=N.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+k.id.A}]),c&&(a=N.getNodeMainDom(c).id,d="hoverOverNode")):N.eqs(e.type,"mouseout")?(c=N.getMDom(n,o,[{tagName:"a",attrName:"treeNode"+k.id.A}]),c||(a="remove",d="hoverOutNode")):N.eqs(e.type,"mousedown")&&(c=N.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+k.id.A}]),c&&(a=N.getNodeMainDom(c).id,d="mousedownNode")),a.length>0)switch(r=C.getNodeCache(n,a),d){case"mousedownNode":l=p.onMousedownNode;break;case"hoverOverNode":l=p.onHoverOverNode;break;case"hoverOutNode":l=p.onHoverOutNode}var u={stop:!1,node:r,nodeEventType:d,nodeEventCallback:l,treeEventType:i,treeEventCallback:s};return u},l=function(e,t,n){n&&(n.isHover=!1,n.editNameFlag=!1)},s=function(e,t){t.cancelEditName=function(t){var n=C.getRoot(e),o=e.data.key.name,a=n.curEditNode;n.curEditNode&&m.cancelCurEditNode(e,t?t:a[o])},t.copyNode=function(t,n,o,a){function r(){m.addNodes(e,t,[d],a)}if(!n)return null;if(t&&!t.isParent&&e.data.keep.leaf&&o===k.move.TYPE_INNER)return null;var d=N.clone(n);return t||(t=null,o=k.move.TYPE_INNER),o==k.move.TYPE_INNER?N.canAsync(e,t)?m.asyncNode(e,t,a,r):r():(m.addNodes(e,t.parentNode,[d],a),m.moveNode(e,t,d,o,!1,a)),d},t.editName=function(t){t&&t.tId&&t===C.getNodeCache(e,t.tId)&&(t.parentTId&&m.expandCollapseParentNode(e,t.getParentNode(),!0),m.editNode(e,t))},t.moveNode=function(t,n,o,a){function r(){m.moveNode(e,t,n,o,!1,a)}return n?t&&!t.isParent&&e.data.keep.leaf&&o===k.move.TYPE_INNER?null:t&&(n.parentTId==t.tId&&o==k.move.TYPE_INNER||y(n,e).find("#"+t.tId).length>0)?null:(t||(t=null),N.canAsync(e,t)&&o===k.move.TYPE_INNER?m.asyncNode(e,t,a,r):r(),n):n},t.setEditable=function(t){return e.edit.enable=t,this.refresh()}},c={setSonNodeLevel:function(e,t,n){if(n){var o=e.data.key.children;if(n.level=t?t.level+1:0,n[o])for(var a=0,r=n[o].length;r>a;a++)n[o][a]&&C.setSonNodeLevel(e,n,n[o][a])}}},u={},p={onHoverOverNode:function(e,t){var n=C.getSetting(e.data.treeId),o=C.getRoot(n);o.curHoverNode!=t&&p.onHoverOutNode(e),o.curHoverNode=t,m.addHoverDom(n,t)},onHoverOutNode:function(e){var t=C.getSetting(e.data.treeId),n=C.getRoot(t);n.curHoverNode&&!C.isSelectedNode(t,n.curHoverNode)&&(m.removeTreeDom(t,n.curHoverNode),n.curHoverNode=null)},onMousedownNode:function(n,o){function a(n){if(0==c.dragFlag&&Math.abs(A-n.clientX)<s.edit.drag.minMoveSize&&Math.abs(x-n.clientY)<s.edit.drag.minMoveSize)return!0;var o,a,d,i,l,p=s.data.key.children;if(w.css("cursor","pointer"),0==c.dragFlag){if(0==N.apply(s.callback.beforeDrag,[s.treeId,h],!0))return r(n),!0;for(o=0,a=h.length;a>o;o++)0==o&&(c.dragNodeShowBefore=[]),d=h[o],d.isParent&&d.open?(m.expandCollapseNode(s,d,!d.open),c.dragNodeShowBefore[d.tId]=!0):c.dragNodeShowBefore[d.tId]=!1;c.dragFlag=1,u.showHoverDom=!1,N.showIfameMask(s,!0);var f=!0,_=-1;if(h.length>1){var j=h[0].parentTId?h[0].getParentNode()[p]:C.getNodes(s);for(l=[],o=0,a=j.length;a>o;o++)if(void 0!==c.dragNodeShowBefore[j[o].tId]&&(f&&_>-1&&_+1!==o&&(f=!1),l.push(j[o]),_=o),h.length===l.length){h=l;break}}for(f&&(b=h[0].getPreNode(),E=h[h.length-1].getNextNode()),g=y("<ul class='zTreeDragUL'></ul>",s),o=0,a=h.length;a>o;o++)if(d=h[o],d.editNameFlag=!1,m.selectNode(s,d,o>0),m.removeTreeDom(s,d),i=y("<li id='"+d.tId+"_tmp'></li>",s),i.append(y(d,k.id.A,s).clone()),i.css("padding","0"),i.children("#"+d.tId+k.id.A).removeClass(k.node.CURSELECTED),g.append(i),o==s.edit.drag.maxShowNodeNum-1){i=y("<li id='"+d.tId+"_moretmp'><a>  ...  </a></li>",s),g.append(i);break}g.attr("id",h[0].tId+k.id.UL+"_tmp"),g.addClass(s.treeObj.attr("class")),g.appendTo(w),v=y("<span class='tmpzTreeMove_arrow'></span>",s),v.attr("id","zTreeMove_arrow_tmp"),v.appendTo(w),s.treeObj.trigger(k.event.DRAG,[n,s.treeId,h])}if(1==c.dragFlag){if(T&&v.attr("id")==n.target.id&&D&&n.clientX+I.scrollLeft()+2>e("#"+D+k.id.A,T).offset().left){var $=e("#"+D+k.id.A,T);n.target=$.length>0?$.get(0):n.target}else T&&(T.removeClass(k.node.TMPTARGET_TREE),D&&e("#"+D+k.id.A,T).removeClass(k.node.TMPTARGET_NODE+"_"+k.move.TYPE_PREV).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER));T=null,D=null,S=!1,P=s;var U=C.getSettings();for(var B in U)U[B].treeId&&U[B].edit.enable&&U[B].treeId!=s.treeId&&(n.target.id==U[B].treeId||e(n.target).parents("#"+U[B].treeId).length>0)&&(S=!0,P=U[B]);var z=I.scrollTop(),F=I.scrollLeft(),Y=P.treeObj.offset(),H=P.treeObj.get(0).scrollHeight,q=P.treeObj.get(0).scrollWidth,K=n.clientY+z-Y.top,V=P.treeObj.height()+Y.top-n.clientY-z,W=n.clientX+F-Y.left,X=P.treeObj.width()+Y.left-n.clientX-F,G=s.edit.drag.borderMax>K&&K>s.edit.drag.borderMin,Z=s.edit.drag.borderMax>V&&V>s.edit.drag.borderMin,Q=s.edit.drag.borderMax>W&&W>s.edit.drag.borderMin,J=s.edit.drag.borderMax>X&&X>s.edit.drag.borderMin,et=K>s.edit.drag.borderMin&&V>s.edit.drag.borderMin&&W>s.edit.drag.borderMin&&X>s.edit.drag.borderMin,tt=G&&0>=P.treeObj.scrollTop(),nt=Z&&P.treeObj.scrollTop()+P.treeObj.height()+10>=H,ot=Q&&0>=P.treeObj.scrollLeft(),at=J&&P.treeObj.scrollLeft()+P.treeObj.width()+10>=q;if(n.target.id&&P.treeObj.find("#"+n.target.id).length>0){for(var rt=n.target;rt&&rt.tagName&&!N.eqs(rt.tagName,"li")&&rt.id!=P.treeId;)rt=rt.parentNode;var dt=!0;for(o=0,a=h.length;a>o;o++){if(d=h[o],rt.id===d.tId){dt=!1;break}if(y(d,s).find("#"+rt.id).length>0){dt=!1;break}}dt&&n.target.id&&(n.target.id==rt.id+k.id.A||e(n.target).parents("#"+rt.id+k.id.A).length>0)&&(T=e(rt),D=rt.id)}d=h[0],et&&(n.target.id==P.treeId||e(n.target).parents("#"+P.treeId).length>0)&&(!T&&(n.target.id==P.treeId||tt||nt||ot||at)&&(S||!S&&d.parentTId)&&(T=P.treeObj),G?P.treeObj.scrollTop(P.treeObj.scrollTop()-10):Z&&P.treeObj.scrollTop(P.treeObj.scrollTop()+10),Q?P.treeObj.scrollLeft(P.treeObj.scrollLeft()-10):J&&P.treeObj.scrollLeft(P.treeObj.scrollLeft()+10),T&&T!=P.treeObj&&T.offset().left<P.treeObj.offset().left&&P.treeObj.scrollLeft(P.treeObj.scrollLeft()+T.offset().left-P.treeObj.offset().left)),g.css({top:n.clientY+z+3+"px",left:n.clientX+F+3+"px"});var it=0,lt=0;if(T&&T.attr("id")!=P.treeId){var st=null==D?null:C.getNodeCache(P,D),ct=n.ctrlKey&&s.edit.drag.isMove&&s.edit.drag.isCopy||!s.edit.drag.isMove&&s.edit.drag.isCopy,ut=!(!b||D!==b.tId),pt=!(!E||D!==E.tId),ft=d.parentTId&&d.parentTId==D,ht=(ct||!pt)&&N.apply(P.edit.drag.prev,[P.treeId,h,st],!!P.edit.drag.prev),gt=(ct||!ut)&&N.apply(P.edit.drag.next,[P.treeId,h,st],!!P.edit.drag.next),vt=!(!ct&&ft||P.data.keep.leaf&&!st.isParent||!N.apply(P.edit.drag.inner,[P.treeId,h,st],!!P.edit.drag.inner));if(ht||gt||vt){var Nt=e("#"+D+k.id.A,T),kt=st.isLastNode?null:e("#"+st.getNextNode().tId+k.id.A,T.next()),mt=Nt.offset().top,Ct=Nt.offset().left,yt=ht?vt?.25:gt?.5:1:-1,Tt=gt?vt?.75:ht?.5:0:-1,bt=(n.clientY+z-mt)/Nt.height();if((1==yt||yt>=bt&&bt>=-.2)&&ht?(it=1-v.width(),lt=mt-v.height()/2,L=k.move.TYPE_PREV):(0==Tt||bt>=Tt&&1.2>=bt)&&gt?(it=1-v.width(),lt=null==kt||st.isParent&&st.open?mt+Nt.height()-v.height()/2:kt.offset().top-v.height()/2,L=k.move.TYPE_NEXT):(it=5-v.width(),lt=mt,L=k.move.TYPE_INNER),v.css({display:"block",top:lt+"px",left:Ct+it+"px"}),Nt.addClass(k.node.TMPTARGET_NODE+"_"+L),(R!=D||O!=L)&&(M=(new Date).getTime()),st&&st.isParent&&L==k.move.TYPE_INNER){var Et=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==st.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===st.tId&&(Et=!1),Et&&(window.zTreeMoveTimer=setTimeout(function(){L==k.move.TYPE_INNER&&st&&st.isParent&&!st.open&&(new Date).getTime()-M>P.edit.drag.autoOpenTime&&N.apply(P.callback.beforeDragOpen,[P.treeId,st],!0)&&(m.switchNode(P,st),P.edit.drag.autoExpandTrigger&&P.treeObj.trigger(k.event.EXPAND,[P.treeId,st]))},P.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=st.tId)}}else T=null,D="",L=k.move.TYPE_INNER,v.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else L=k.move.TYPE_INNER,T&&N.apply(P.edit.drag.inner,[P.treeId,h,null],!!P.edit.drag.inner)?T.addClass(k.node.TMPTARGET_TREE):T=null,v.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);R=D,O=L}return!1}function r(n){function o(){if(S){if(!f)for(var e=0,t=h.length;t>e;e++)m.removeNode(s,h[e]);if(L==k.move.TYPE_INNER)m.addNodes(P,b,E);else if(m.addNodes(P,b.getParentNode(),E),L==k.move.TYPE_PREV)for(e=0,t=E.length;t>e;e++)m.moveNode(P,b,E[e],L,!1);else for(e=-1,t=E.length-1;t>e;t--)m.moveNode(P,b,E[t],L,!1)}else if(f&&L==k.move.TYPE_INNER)m.addNodes(P,b,E);else if(f&&m.addNodes(P,b.getParentNode(),E),L!=k.move.TYPE_NEXT)for(e=0,t=E.length;t>e;e++)m.moveNode(P,b,E[e],L,!1);else for(e=-1,t=E.length-1;t>e;t--)m.moveNode(P,b,E[t],L,!1);m.selectNodes(P,E),y(E[0],s).focus().blur(),s.treeObj.trigger(k.event.DROP,[n,P.treeId,E,b,L,f])}if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),R=null,O=null,I.unbind("mousemove",a),I.unbind("mouseup",r),I.unbind("selectstart",d),w.css("cursor","auto"),T&&(T.removeClass(k.node.TMPTARGET_TREE),D&&e("#"+D+k.id.A,T).removeClass(k.node.TMPTARGET_NODE+"_"+k.move.TYPE_PREV).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(k.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),N.showIfameMask(s,!1),u.showHoverDom=!0,0!=c.dragFlag){c.dragFlag=0;var i,l,p;for(i=0,l=h.length;l>i;i++)p=h[i],p.isParent&&c.dragNodeShowBefore[p.tId]&&!p.open&&(m.expandCollapseNode(s,p,!p.open),delete c.dragNodeShowBefore[p.tId]);g&&g.remove(),v&&v.remove();var f=n.ctrlKey&&s.edit.drag.isMove&&s.edit.drag.isCopy||!s.edit.drag.isMove&&s.edit.drag.isCopy;if(!f&&T&&D&&h[0].parentTId&&D==h[0].parentTId&&L==k.move.TYPE_INNER&&(T=null),T){var b=null==D?null:C.getNodeCache(P,D);if(0==N.apply(s.callback.beforeDrop,[P.treeId,h,b,L,f],!0))return m.selectNodes(_,h),void 0;var E=f?N.clone(h):h;L==k.move.TYPE_INNER&&N.canAsync(P,b)?m.asyncNode(P,b,!1,o):o()}else m.selectNodes(_,h),s.treeObj.trigger(k.event.DROP,[n,s.treeId,h,null,null,null])}}function d(){return!1}var i,l,s=C.getSetting(n.data.treeId),c=C.getRoot(s),u=C.getRoots();if(2==n.button||!s.edit.enable||!s.edit.drag.isCopy&&!s.edit.drag.isMove)return!0;var p=n.target,f=C.getRoot(s).curSelectedList,h=[];if(C.isSelectedNode(s,o))for(i=0,l=f.length;l>i;i++){if(f[i].editNameFlag&&N.eqs(p.tagName,"input")&&null!==p.getAttribute("treeNode"+k.id.INPUT))return!0;if(h.push(f[i]),h[0].parentTId!==f[i].parentTId){h=[o];break}}else h=[o];m.editNodeBlur=!0,m.cancelCurEditNode(s);var g,v,T,b,E,I=e(s.treeObj.get(0).ownerDocument),w=e(s.treeObj.get(0).ownerDocument.body),S=!1,P=s,_=s,R=null,O=null,D=null,L=k.move.TYPE_INNER,A=n.clientX,x=n.clientY,M=(new Date).getTime();return N.uCanDo(s)&&I.bind("mousemove",a),I.bind("mouseup",r),I.bind("selectstart",d),n.preventDefault&&n.preventDefault(),!0}},f={getAbs:function(e){var t=e.getBoundingClientRect(),n=document.body.scrollTop+document.documentElement.scrollTop,o=document.body.scrollLeft+document.documentElement.scrollLeft;return[t.left+o,t.top+n]},inputFocus:function(e){e.get(0)&&(e.focus(),N.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},showIfameMask:function(e,t){for(var n=C.getRoot(e);n.dragMaskList.length>0;)n.dragMaskList[0].remove(),n.dragMaskList.shift();if(t)for(var o=y("iframe",e),a=0,r=o.length;r>a;a++){var d=o.get(a),i=N.getAbs(d),l=y("<div id='zTreeMask_"+a+"' class='zTreeMask' style='top:"+i[1]+"px; left:"+i[0]+"px; width:"+d.offsetWidth+"px; height:"+d.offsetHeight+"px;'></div>",e);l.appendTo(y("body",e)),n.dragMaskList.push(l)}}},h={addEditBtn:function(e,t){if(!(t.editNameFlag||y(t,k.id.EDIT,e).length>0)&&N.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var n=y(t,k.id.A,e),o="<span class='"+k.className.BUTTON+" edit' id='"+t.tId+k.id.EDIT+"' title='"+N.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+k.id.EDIT+" style='display:none;'></span>";n.append(o),y(t,k.id.EDIT,e).bind("click",function(){return N.uCanDo(e)&&0!=N.apply(e.callback.beforeEditName,[e.treeId,t],!0)?(m.editNode(e,t),!1):!1}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||y(t,k.id.REMOVE,e).length>0)&&N.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var n=y(t,k.id.A,e),o="<span class='"+k.className.BUTTON+" remove' id='"+t.tId+k.id.REMOVE+"' title='"+N.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+k.id.REMOVE+" style='display:none;'></span>";n.append(o),y(t,k.id.REMOVE,e).bind("click",function(){return N.uCanDo(e)&&0!=N.apply(e.callback.beforeRemove,[e.treeId,t],!0)?(m.removeNode(e,t),e.treeObj.trigger(k.event.REMOVE,[e.treeId,t]),!1):!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(e,t){C.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(m.addEditBtn(e,t),m.addRemoveBtn(e,t)),N.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t){var n=C.getRoot(e),o=e.data.key.name,a=n.curEditNode;if(a){var r=n.curEditInput,d=t?t:r.val(),i=!!t;if(N.apply(e.callback.beforeRename,[e.treeId,a,d,i],!0)===!1)return!1;a[o]=d?d:r.val(),e.treeObj.trigger(k.event.RENAME,[e.treeId,a,i]);var l=y(a,k.id.A,e);l.removeClass(k.node.CURSELECTED_EDIT),r.unbind(),m.setNodeName(e,a),a.editNameFlag=!1,n.curEditNode=null,n.curEditInput=null,m.selectNode(e,a,!1)}return n.noSelection=!0,!0},editNode:function(e,t){var n=C.getRoot(e);if(m.editNodeBlur=!1,C.isSelectedNode(e,t)&&n.curEditNode==t&&t.editNameFlag)return setTimeout(function(){N.inputFocus(n.curEditInput)},0),void 0;var o=e.data.key.name;t.editNameFlag=!0,m.removeTreeDom(e,t),m.cancelCurEditNode(e),m.selectNode(e,t,!1),y(t,k.id.SPAN,e).html("<input type=text class='rename' id='"+t.tId+k.id.INPUT+"' treeNode"+k.id.INPUT+" >");var a=y(t,k.id.INPUT,e);a.attr("value",t[o]),e.edit.editNameSelectAll?N.inputSelect(a):N.inputFocus(a),a.bind("blur",function(){m.editNodeBlur||m.cancelCurEditNode(e)}).bind("keydown",function(n){"13"==n.keyCode?(m.editNodeBlur=!0,m.cancelCurEditNode(e)):"27"==n.keyCode&&m.cancelCurEditNode(e,t[o])}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),y(t,k.id.A,e).addClass(k.node.CURSELECTED_EDIT),n.curEditInput=a,n.noSelection=!1,n.curEditNode=t},moveNode:function(e,t,n,o,a,r){var d=C.getRoot(e),i=e.data.key.children;if(t!=n&&(!e.data.keep.leaf||!t||t.isParent||o!=k.move.TYPE_INNER)){var l=n.parentTId?n.getParentNode():d,s=null===t||t==d;s&&null===t&&(t=d),s&&(o=k.move.TYPE_INNER);var c=t.parentTId?t.getParentNode():d;o!=k.move.TYPE_PREV&&o!=k.move.TYPE_NEXT&&(o=k.move.TYPE_INNER),o==k.move.TYPE_INNER&&(s?n.parentTId=null:(t.isParent||(t.isParent=!0,t.open=!!t.open,m.setNodeLineIcos(e,t)),n.parentTId=t.tId));var u,p;if(s)u=e.treeObj,p=u;else{if(r||o!=k.move.TYPE_INNER?r||m.expandCollapseNode(e,t.getParentNode(),!0,!1):m.expandCollapseNode(e,t,!0,!1),u=y(t,e),p=y(t,k.id.UL,e),u.get(0)&&!p.get(0)){var f=[];m.makeUlHtml(e,t,f,""),u.append(f.join(""))}p=y(t,k.id.UL,e)}var h=y(n,e);h.get(0)?u.get(0)||h.remove():h=m.appendNodes(e,n.level,[n],null,!1,!0).join(""),p.get(0)&&o==k.move.TYPE_INNER?p.append(h):u.get(0)&&o==k.move.TYPE_PREV?u.before(h):u.get(0)&&o==k.move.TYPE_NEXT&&u.after(h);var g,v,N=-1,T=0,b=null,E=null,I=n.level;if(n.isFirstNode)N=0,l[i].length>1&&(b=l[i][1],b.isFirstNode=!0);else if(n.isLastNode)N=l[i].length-1,b=l[i][N-1],b.isLastNode=!0;else for(g=0,v=l[i].length;v>g;g++)if(l[i][g].tId==n.tId){N=g;break}if(N>=0&&l[i].splice(N,1),o!=k.move.TYPE_INNER)for(g=0,v=c[i].length;v>g;g++)c[i][g].tId==t.tId&&(T=g);if(o==k.move.TYPE_INNER?(t[i]||(t[i]=[]),t[i].length>0&&(E=t[i][t[i].length-1],E.isLastNode=!1),t[i].splice(t[i].length,0,n),n.isLastNode=!0,n.isFirstNode=1==t[i].length):t.isFirstNode&&o==k.move.TYPE_PREV?(c[i].splice(T,0,n),E=t,E.isFirstNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!0,n.isLastNode=!1):t.isLastNode&&o==k.move.TYPE_NEXT?(c[i].splice(T+1,0,n),E=t,E.isLastNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!0):(o==k.move.TYPE_PREV?c[i].splice(T,0,n):c[i].splice(T+1,0,n),n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!1),C.fixPIdKeyValue(e,n),C.setSonNodeLevel(e,n.getParentNode(),n),m.setNodeLineIcos(e,n),m.repairNodeLevelClass(e,n,I),!e.data.keep.parent&&1>l[i].length){l.isParent=!1,l.open=!1;var w=y(l,k.id.UL,e),S=y(l,k.id.SWITCH,e),P=y(l,k.id.ICON,e);m.replaceSwitchClass(l,S,k.folder.DOCU),m.replaceIcoClass(l,P,k.folder.DOCU),w.css("display","none")}else b&&m.setNodeLineIcos(e,b);E&&m.setNodeLineIcos(e,E),e.check&&e.check.enable&&m.repairChkClass&&(m.repairChkClass(e,l),m.repairParentChkClassWithSelf(e,l),l!=n.parent&&m.repairParentChkClassWithSelf(e,n)),r||m.expandCollapseParentNode(e,n.getParentNode(),!0,a)}},removeEditBtn:function(e,t){y(t,k.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){y(t,k.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,m.removeEditBtn(e,t),m.removeRemoveBtn(e,t),N.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,n){if(n!==t.level){var o=y(t,e),a=y(t,k.id.A,e),r=y(t,k.id.UL,e),d=k.className.LEVEL+n,i=k.className.LEVEL+t.level;o.removeClass(d),o.addClass(i),a.removeClass(d),a.addClass(i),r.removeClass(d),r.addClass(i)}},selectNodes:function(e,t){for(var n=0,o=t.length;o>n;n++)m.selectNode(e,t[n],n>0)}},g={tools:f,view:h,event:u,data:c};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,g);var v=e.fn.zTree,N=v._z.tools,k=v.consts,m=v._z.view,C=v._z.data,y=(v._z.event,N.$);C.exSetting(n),C.addInitBind(r),C.addInitUnBind(d),C.addInitCache(a),C.addInitNode(l),C.addInitProxy(i),C.addInitRoot(o),C.addZTreeTools(s);var T=m.cancelPreSelectedNode;m.cancelPreSelectedNode=function(e,t){for(var n=C.getRoot(e).curSelectedList,o=0,a=n.length;a>o&&(t&&t!==n[o]||(m.removeTreeDom(e,n[o]),!t));o++);T&&T.apply(m,arguments)};var b=m.createNodes;m.createNodes=function(e,t,n,o){b&&b.apply(m,arguments),n&&m.repairParentChkClassWithSelf&&m.repairParentChkClassWithSelf(e,o)};var E=m.makeNodeUrl;m.makeNodeUrl=function(e){return e.edit.enable?null:E.apply(m,arguments)};var I=m.removeNode;m.removeNode=function(e,t){var n=C.getRoot(e);n.curEditNode===t&&(n.curEditNode=null),I&&I.apply(m,arguments)};var w=m.selectNode;m.selectNode=function(e,t){var n=C.getRoot(e);return C.isSelectedNode(e,t)&&n.curEditNode==t&&t.editNameFlag?!1:(w&&w.apply(m,arguments),m.addHoverDom(e,t),!0)};var S=N.uCanDo;N.uCanDo=function(e,t){var n=C.getRoot(e);return t&&(N.eqs(t.type,"mouseover")||N.eqs(t.type,"mouseout")||N.eqs(t.type,"mousedown")||N.eqs(t.type,"mouseup"))?!0:!n.curEditNode&&(S?S.apply(m,arguments):!0)}})(t)});